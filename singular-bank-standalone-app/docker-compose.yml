services:
  # ---------- BANK 1 ----------
  bank1-backend:
    build:
      context: ./backend
    container_name: bank1-backend
    environment:
      - BANK_ID=bank1
    ports:
      - "8001:8000"

  bank1-frontend:
    build:
      context: ./teller-dashboard
    container_name: bank1-frontend
    environment:
      # ðŸ‘‡ match what apiClient.js expects, and point to host port 8001
      - REACT_APP_BACKEND_URL=http://localhost:8001
    ports:
      - "3001:80"
    depends_on:
      - bank1-backend

  # ---------- BANK 2 ----------
  bank2-backend:
    build:
      context: ./backend
    container_name: bank2-backend
    environment:
      - BANK_ID=bank2
    ports:
      - "8002:8000"

  bank2-frontend:
    build:
      context: ./teller-dashboard
    container_name: bank2-frontend
    environment:
      # ðŸ‘‡ bank2 talks to host port 8002
      - REACT_APP_BACKEND_URL=http://localhost:8002
    ports:
      - "3002:80"
    depends_on:
      - bank2-backend
